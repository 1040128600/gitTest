package service;

import dao.BicycleFeeStatisticDao;
import iservice.IBicycleFeeStatisticService;
import model.BicycleStatistic;
import model.Bicycle_info;
import util.Page;
import util.ResultBean;
import static util.ResultBean.*;

import org.springframework.stereotype.Service;
@Service
public class BicycleFeeStatisticService implements IBicycleFeeStatisticService {
	private BicycleFeeStatisticDao dao;
	@Override
	public ResultBean<BicycleStatistic> getStatisticByMonth(String month) {
		// TODO 自动生成的方法存根
		BicycleStatistic b =new BicycleStatistic();
		b.setBicycleNum(dao.getBicycleNumByMonth(month));
		b.setRentTimes(dao.getRentTimesByMonth(month));
		b.setRepaireTimes(dao.getRepairTimesByMonth(month));
		b.setSumRentTime(dao.getRentTimeByMonth(month));
		b.setAvgRentTime(1.0*b.getSumRentTime()/b.getRentTimes());
		b.setSumIncomeFee(dao.getIncomeByMonth(month));
		b.setAvgIncomeFee(b.getSumIncomeFee()/b.getRentTimes());
		b.setSumRepairFee(dao.getRepairFeeByMonth(month));
		b.setAvgRepairFee(b.getSumRepairFee()/b.getRepaireTimes());
		
		return new ResultBean<BicycleStatistic>(b,success);
	}

	@Override
	public ResultBean<BicycleStatistic> getStatisticByBicycleId(Integer bicycle_Id) {
		// TODO 自动生成的方法存根
		BicycleStatistic b =new BicycleStatistic();
		b.setUseTime(dao.getBicycleUseTime(bicycle_Id));
		b.setRentTimes(dao.getBicycleRentTimes(bicycle_Id));
		b.setRepaireTimes(dao.getBicycleRepairTimes(bicycle_Id));
		b.setSumRentTime(dao.getBicycleRentTime(bicycle_Id));
		b.setAvgRentTime(1.0*b.getSumRentTime()/b.getRentTimes());
		b.setSumIncomeFee(dao.getBicycleIncome(bicycle_Id));
		b.setAvgIncomeFee(b.getSumIncomeFee()/b.getRentTimes());
		b.setSumRepairFee(dao.getBicycleRepairFee(bicycle_Id));
		b.setAvgRepairFee(b.getSumRepairFee()/b.getRepaireTimes());
		b.setDeployTimes(dao.getBicycleDeployTimes(bicycle_Id));
		return new ResultBean<BicycleStatistic>(b,success);
	}



}
